<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wish Jar â€” Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>body{font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,sans-serif}</style>
</head>
<body class="min-h-screen text-white overflow-x-hidden" style="background: radial-gradient(circle at 20% 20%, #60A5FA 0%, transparent 25%), radial-gradient(circle at 80% 20%, #A78BFA 0%, transparent 25%), radial-gradient(circle at 20% 80%, #F472B6 0%, transparent 25%), radial-gradient(circle at 80% 80%, #34D399 0%, transparent 25%), radial-gradient(circle at 50% 50%, #FCA5A5 0%, #6d28d9 60%);">

  <!-- Top Navigation (matching donor theme) -->
  <header class="sticky top-0 z-40 bg-white/10 backdrop-blur border-b border-white/10">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="inline-flex h-9 w-9 items-center justify-center rounded-lg bg-white/20">ðŸ«™</span>
        <div>
          <div class="font-bold text-lg leading-tight">Wish Jar â€” Admin</div>
          <div class="text-xs opacity-85">Manage wishes, donations & inbox</div>
        </div>
      </div>
      <nav class="flex items-center gap-2 text-sm">
        <button data-tab="track" class="adminTab px-3 py-2 rounded-lg bg-white text-indigo-700 font-semibold">Track</button>
        <button data-tab="manage" class="adminTab px-3 py-2 rounded-lg bg-white/10">Manage</button>
        <button data-tab="donors" class="adminTab px-3 py-2 rounded-lg bg-white/10">Donors</button>
        <button data-tab="inbox" class="adminTab px-3 py-2 rounded-lg bg-white/10">Inbox</button>
        <button id="resetDemo" class="ml-4 px-3 py-2 rounded-lg bg-white/10">Reset Demo</button>
        <span class="inline-block w-px h-6 bg-white/20 mx-2"></span>
        <button id="logoutBtn" class="px-3 py-2 rounded-lg bg-white/10 border border-white/20 hover:bg-white/20">Logout</button>
      </nav>
    </div>
  </header>

  <main class="p-6 max-w-6xl mx-auto space-y-6">
    <!-- ADMIN -->
      <section id="page-admin" class="page">
        <div class="max-w-6xl mx-auto px-6 py-10">
          <h2 class="text-3xl md:text-4xl font-bold">Admin</h2>
          <p class="mt-3 text-white/90">Manage wishes and donations (demo only, saved in your browser).</p>

          <!-- TRACK -->
          <div id="admin-track" class="mt-6 adminPage">
            <div class="grid lg:grid-cols-2 gap-6">
              <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
                <h3 class="text-2xl font-semibold mb-4">Wishes</h3>
                <div id="adminWishes" class="space-y-4"></div>
              </div>
              <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
                <h3 class="text-2xl font-semibold mb-4">Donations</h3>
                <div id="adminDonations" class="space-y-4"></div>
                <div id="studentDetails" class="mt-4 hidden p-4 rounded-xl bg-white/5 border border-white/10"></div>
                <div class="mt-6 p-4 rounded-xl bg-white/10 border border-white/10">
                  <div class="font-semibold">Student Thank-you</div>
                  <form id="thankyouForm" class="mt-3 space-y-3">
                    <div>
                      <label class="block text-sm mb-1">Donation Code</label>
                      <input id="tyCode" class="w-full px-3 py-2 rounded-xl bg-white text-slate-900" placeholder="e.g., WISH-1234" />
                    </div>
                    <div>
                      <label class="block text-sm mb-1">Message from student</label>
                      <textarea id="tyNote" rows="3" class="w-full px-3 py-2 rounded-xl bg-white text-slate-900" placeholder="Say thanks or share an update..."></textarea>
                    </div>
                    <div>
                      <label class="block text-sm mb-1">Optional image</label>
                      <input id="tyImage" type="file" accept="image/*" class="w-full px-3 py-2 rounded-xl bg-white text-slate-900" />
                    </div>
                    <button class="px-4 py-2 rounded-xl bg-white text-indigo-700 font-semibold">Save Thank-you</button>
                    <div class="text-xs opacity-80">Note: Image is stored locally and shown to the donor on their status page.</div>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <!-- MANAGE -->
          <div id="admin-manage" class="mt-6 adminPage hidden">
            <div class="grid lg:grid-cols-2 gap-6">
              <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
                <h3 class="text-2xl font-semibold mb-4">Add New Wish</h3>
                <form id="addWishForm" class="space-y-4" enctype="multipart/form-data">
  <div class="grid md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm mb-2">Student Name (for admin records)</label>
      <input name="studentName" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900" placeholder="e.g., John Doe" required />
    </div>
    <div>
      <label class="block text-sm mb-2">Class</label>
      <input name="studentClass" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900" placeholder="e.g., 5 Amanah" required />
    </div>
    <div>
      <label class="block text-sm mb-2">Nickname (optional)</label>
      <input name="nickname" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900" placeholder="Leave blank to auto-generate" />
    </div>
    <div>
      <label class="block text-sm mb-2">Category</label>
      <select name="category" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900">
        <option value="shoes">Shoes</option>
        <option value="stationery">Stationery</option>
        <option value="meals">Meals</option>
        <option value="data">Data</option>
        <option value="transport">Transport</option>
        <option value="other">Other</option>
      </select>
    </div>
  </div>

  <div class="grid md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm mb-2">Emotion</label>
      <select name="emotion" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900">
        <option value="worry">Worry</option>
        <option value="envy">Envy</option>
        <option value="shy">Shy</option>
      </select>
    </div>
    <div>
      <label class="block text-sm mb-2">Monthly Batch</label>
      <input name="batch" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900" placeholder="e.g., 2025-08" />
    </div>
  </div>

  <div>
    <label class="block text-sm mb-2">Situation</label>
    <textarea name="situation" rows="3" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900" required></textarea>
  </div>

  <div>
    <label class="block text-sm mb-2">Wish</label>
    <textarea name="wish" rows="2" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900" required></textarea>
  </div>

  <!-- student image -->
  <div>
    <label class="block text-sm mb-2">Student photo (optional, max 5MB)</label>
    <input type="file" id="addStudentImage" name="student_image" accept="image/*" />
    <div id="studentImagePreview" class="mt-2"></div>
  </div>

  <!-- situation image -->
  <div>
    <label class="block text-sm mb-2">Situation photo (optional, max 5MB)</label>
    <input type="file" id="addSituationImage" name="situation_image" accept="image/*" />
    <div id="situationImagePreview" class="mt-2"></div>
  </div>

  <button class="px-5 py-3 rounded-xl bg-white text-indigo-700 font-semibold">Add Wish</button>
</form>

              </div>

              <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
                <h3 class="text-2xl font-semibold mb-4">Existing Wishes</h3>
                <div id="manageWishesList" class="space-y-3"></div>
              </div>
            </div>
          </div>

          <!-- DONORS -->
          <div id="admin-donors" class="mt-6 adminPage hidden">
            <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-2xl font-semibold">Donor Directory</h3>
                <input id="donorSearch" class="px-3 py-2 rounded-xl bg-white text-slate-900" placeholder="Search by name..." />
              </div>
              <div id="donorList" class="space-y-3"></div>
            </div>
          </div>
        </div>
      </section>
    </main>


    <!-- INBOX -->
    <section id="admin-inbox" class="adminPage hidden">
      <div class="max-w-6xl mx-auto px-6 py-10">
        <div class="flex items-center justify-between">
          <h2 class="text-2xl font-bold">Inbox</h2>
          <div id="adminInboxBadge" class="text-sm bg-white/20 px-3 py-1 rounded-full">All threads</div>
        </div>

        <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- Thread list -->
          <div class="lg:col-span-1 rounded-2xl bg-white/10 border border-white/10 overflow-hidden">
            <div class="px-4 py-3 border-b border-white/10 font-semibold">Conversations</div>
            <div id="adminThreadList" class="max-h-[60vh] overflow-y-auto divide-y divide-white/10"></div>
          </div>

          <!-- Chat view -->
          <div class="lg:col-span-2 rounded-2xl bg-white/10 border border-white/10 flex flex-col min-h-[50vh]">
            <div id="adminChatHeader" class="px-5 py-3 border-b border-white/10 flex items-center justify-between">
              <div class="font-semibold">Select a conversation</div>
              <div id="adminChatMeta" class="text-xs opacity-80"></div>
            </div>

            <div id="adminChatMessages" class="flex-1 overflow-y-auto p-5 space-y-3"></div>

            <div class="p-4 border-t border-white/10">
              <form id="adminChatForm" class="flex items-center gap-3">
                <input id="adminChatInput" class="flex-1 px-4 py-3 rounded-xl bg-white text-slate-900 placeholder-slate-400" placeholder="Write a message to the donor..." />
                <button id="chatSendBtn" type="submit" class="px-4 py-3 rounded-xl bg-white text-indigo-700 font-semibold hover:bg-white/90">Send</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="js/admin.js"></script>
</body>
</html>

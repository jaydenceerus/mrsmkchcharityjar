<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DreamDrops — Donor</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --glass: rgba(255,255,255,0.12); }
    body { font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    .page { display: none; }
    .page.active { display: block; }

    /* Modal visibility (fixes always-visible popup) */
    .modal-hidden { opacity: 0; pointer-events: none; transform: translateY(10px) scale(.98); transition: all .18s ease; }
    .modal-visible { opacity: 1; pointer-events: auto; transform: translateY(0) scale(1); transition: all .18s ease; }

    @keyframes bob {
  0%   { transform: translateY(0); }
  50%  { transform: translateY(-6px); }
  100% { transform: translateY(0); }
}

/* sway only rotates (no translate) */
@keyframes sway {
  0%   { transform: rotate(-3deg); }
  50%  { transform: rotate(3deg); }
  100% { transform: rotate(-3deg); }
}

/* Outer wrapper handles bob (translate). Inner sway wrapper handles rotate. */
g.ballWrap {
  /* bob runs on this element (you already had inline bob timing) */
  transform-box: fill-box; /* important for SVG transform origin handling */
}

/* Inner wrapper for rotation */
g.sway {
  transform-box: fill-box;
  transform-origin: center center;
  /* keep pointer events off on inner group so click hits the hit-circle when present */
  pointer-events: none;
}

/* Pause while dragging if you use an is-dragging class on the outer wrap */
g.ballWrap.is-dragging { animation-play-state: paused !important; }
    @keyframes glowPulse { 0%{box-shadow:0 0 0 0 rgba(255,255,255,0.35)} 70%{box-shadow:0 0 40px 8px rgba(255,255,255,0.15)} 100%{box-shadow:0 0 0 0 rgba(255,255,255,0)} }

    @keyframes pulseGlow {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

  </style>
</head>
<body class="min-h-screen text-white overflow-x-hidden relative"
 style="background:url('assets/bg.jpeg') no-repeat center center fixed; background-size:cover;">


<div class="absolute inset-0 -z-20">
    <div class="w-full h-full bg-[url('assets/bg.jpeg')] bg-cover bg-center filter blur-md"></div>
    <div class="absolute inset-0 bg-purple-900/40"></div> <!-- subtle overlay tint -->
  </div>


  <!-- Top Navigation -->
  <header class="sticky top-0 z-40 bg-white/10 backdrop-blur border-b border-white/10">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="inline-flex h-9 w-9 items-center justify-center rounded-lg bg-white/20">🫙</span>
        <div>
          <div class="font-bold text-lg leading-tight">DreamDrops</div>
          <div class="text-xs opacity-85">Tiny drops, big splashes</div>
        </div>
      </div>
      <nav class="flex items-center gap-2 text-sm">
        <button data-route="home" class="navlink px-3 py-2 rounded-lg hover:bg-white/20 font-semibold bg-white/20">Wish Jar</button>
        <button data-route="about" class="navlink px-3 py-2 rounded-lg hover:bg-white/20">About</button>
        <button data-route="achievements" class="navlink px-3 py-2 rounded-lg hover:bg-white/20">Achievements</button>
        <button data-route="status" class="navlink px-3 py-2 rounded-lg hover:bg-white/20">Donor Status</button>
        <button data-route="inbox" class="navlink px-3 py-2 rounded-lg hover:bg-white/20">Inbox</button>
        <span class="inline-block w-px h-6 bg-white/20 mx-1"></span>
        <button id="profileBtn" class="px-3 py-2 rounded-lg bg-white/10 border border-white/20 hover:bg-white/20">Profile</button>
        <button id="logoutBtn" class="px-3 py-2 rounded-lg bg-white/10 border border-white/20 hover:bg-white/20">Logout</button>
      </nav>
    </div>
  </header>

  <main class="relative z-10">
    <!-- HOME -->
    <section id="page-home" class="page active">
      <div class="absolute inset-0 overflow-hidden -z-10 pointer-events-none">
  <style>
    @keyframes floaty {
      0%   { transform: translateY(0) rotate(var(--tilt)); }
      50%  { transform: translateY(-12px) rotate(calc(var(--tilt) + 2deg)); }
      100% { transform: translateY(0) rotate(var(--tilt)); }
    }
    .char-img {
      animation: floaty var(--dur,6s) ease-in-out infinite;
    }
  </style>

  <!-- Top-left -->
  <div class="absolute top-[8%] left-[4%] w-72 h-72 rounded-full flex items-center justify-center">
    <div class="absolute inset-0 rounded-full" style="background: rgba(34,197,94,0.5); filter: blur(50px);"></div>
    <img src="assets/envy.png"
         alt="Green boy"
         class="relative h-44 drop-shadow-xl object-contain char-img"
         style="--tilt: -5deg; --dur: 6.2s;"
         loading="lazy" />
  </div>

  <!-- Top-right -->
  <div class="absolute top-[6%] right-[4%] w-72 h-72 rounded-full flex items-center justify-center">
    <div class="absolute inset-0 rounded-full" style="background: rgba(249,115,22,0.3); filter: blur(50px);"></div>
    <img src="assets/gratitude.png"
         alt="Orange boy"
         class="relative h-60 drop-shadow-xl object-contain char-img"
         style="--tilt: 4deg; --dur: 5.8s;"
         loading="lazy" />
  </div>

  <!-- Bottom-left -->
  <div class="absolute bottom-[12%] left-[6%] w-72 h-72 rounded-full flex items-center justify-center">
    <div class="absolute inset-0 rounded-full" style="background: rgba(236,72,153,0.3); filter: blur(50px);"></div>
    <img src="assets/shy.png"
         alt="Pink girl sitting"
         class="relative h-45 drop-shadow-xl object-contain char-img"
         style="--tilt: -7deg; --dur: 6.5s;"
         loading="lazy" />
  </div>

  <!-- Bottom-right -->
  <div class="absolute bottom-[10%] right-[8%] w-100 h-72 rounded-full flex items-center justify-center">
    <div class="absolute inset-0 rounded-full" style="background: rgba(250,204,21,0.3); filter: blur(50px);"></div>
    <img src="assets/chirpy.png"
         alt="Yellow girl standing"
         class="relative h-60 drop-shadow-xl object-contain char-img"
         style="--tilt: 6deg; --dur: 5.9s;"
         loading="lazy" />
  </div>
</div>
      <div class="max-w-6xl mx-auto px-6 py-10 text-center">
        <h1 class="text-3xl md:text-4xl font-bold tracking-tight">Choose a Wish to Brighten a Day</h1>
        <p class="text-white/90 text-lg leading-relaxed mt-3">Each ball is an anonymous student wish. Click to see their story and pledge support.</p>
        <div class="mt-10 flex flex-col items-center">
          <div id="jarButton" role="button" tabindex="0" aria-label="Wish Jar"
               class="group relative mx-auto w-[380px] h-[580px] md:w-[520px] md:h-[720px] rounded-2xl bg-white/10 backdrop-blur-sm border border-white/20 hover:bg-white/12 transition-all duration-300"
               style="animation: glowPulse 3s ease-in-out infinite">
            <svg viewBox="0 0 360 660" class="absolute inset-0 w-full h-full">
              <defs>
                <linearGradient id="jarGlass" x1="0" y1="0" x2="0" y2="1">
                  <stop offset="0%" stop-color="rgba(255,255,255,0.7)"/>
                  <stop offset="100%" stop-color="rgba(255,255,255,0.15)"/>
                </linearGradient>
                <clipPath id="jarClip">
                  <path d="M60,100 h240 a22,22 0 0 1 22,22 v300 q0,90 -98,120 h-88 q-98,-30 -98,-120 v-300 a22,22 0 0 1 22,-22 z" />
                </clipPath>
              </defs>

              <path d="M60,100 h240 a22,22 0 0 1 22,22 v300 q0,90 -98,120 h-88 q-98,-30 -98,-120 v-300 a22,22 0 0 1 22,-22 z"
                    fill="url(#jarGlass)" stroke="white" stroke-opacity="0.35" stroke-width="3"/>
              <rect x="78" y="72" width="204" height="26" rx="6" fill="rgba(255,255,255,0.6)" />
              <rect x="112" y="58" width="136" height="14" rx="6" fill="rgba(255,255,255,0.45)" />

              <!-- REPLACE your existing ballsGroup with this block -->
<!-- 2) Replace your <g id="ballsGroup"> with this updated block (sway hardcoded) -->
<g clip-path="url(#jarClip)" id="ballsGroup">
  <ellipse cx="180" cy="490" rx="170" ry="70" fill="rgba(255,255,255,0.08)"/>
  <ellipse cx="180" cy="520" rx="170" ry="70" fill="rgba(255,255,255,0.08)"/>

  <!-- 30 hard-coded circles arranged in curved rows (6 rows × 5) -->
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.10s, .70s; cursor:pointer;">
    <circle data-id="w1"  cx="80"  cy="485" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.30s, .90s; cursor:pointer;">
    <circle data-id="w2"  cx="125" cy="510" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.60s, 1.20s; cursor:pointer;">
    <circle data-id="w3"  cx="175" cy="515" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.90s, 1.50s; cursor:pointer;">
    <circle data-id="w4"  cx="225" cy="509" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.20s, 1.80s; cursor:pointer;">
    <circle data-id="w5"  cx="270" cy="485" r="24" />
  </g>

  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.15s, .75s; cursor:pointer;">
    <circle data-id="w6"  cx="70"  cy="440" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.35s, .95s; cursor:pointer;">
    <circle data-id="w7"  cx="125" cy="462" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.65s, 1.25s; cursor:pointer;">
    <circle data-id="w8"  cx="175" cy="468" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.95s, 1.55s; cursor:pointer;">
    <circle data-id="w9"  cx="225" cy="460" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.25s, 1.85s; cursor:pointer;">
    <circle data-id="w10" cx="290" cy="440" r="24" />
  </g>

  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.20s, .80s; cursor:pointer;">
    <circle data-id="w11" cx="65"  cy="390" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.40s, 1.00s; cursor:pointer;">
    <circle data-id="w12" cx="125" cy="417" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.70s, 1.30s; cursor:pointer;">
    <circle data-id="w13" cx="175" cy="420" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.00s, 1.60s; cursor:pointer;">
    <circle data-id="w14" cx="245" cy="413" r="24" />
  </g>
  <g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.30s, 1.90s; cursor:pointer;">
    <circle data-id="w15" cx="295" cy="393" r="24" />
  </g>

  <!-- Row 2 -->
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.25s, .85s; cursor:pointer;">
  <circle data-id="w16" cx="65"  cy="350" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.45s, 1.05s; cursor:pointer;">
  <circle data-id="w17" cx="125" cy="377" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.75s, 1.35s; cursor:pointer;">
  <circle data-id="w18" cx="175" cy="380" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.05s, 1.65s; cursor:pointer;">
  <circle data-id="w19" cx="225" cy="373" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.35s, 1.95s; cursor:pointer;">
  <circle data-id="w20" cx="295" cy="353" r="24" />
</g>

<!-- Row 3 -->
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.30s, .90s; cursor:pointer;">
  <circle data-id="w21" cx="65"  cy="310" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.50s, 1.10s; cursor:pointer;">
  <circle data-id="w22" cx="125" cy="337" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.80s, 1.40s; cursor:pointer;">
  <circle data-id="w23" cx="175" cy="340" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.10s, 1.70s; cursor:pointer;">
  <circle data-id="w24" cx="225" cy="333" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.40s, 2.00s; cursor:pointer;">
  <circle data-id="w25" cx="295" cy="313" r="24" />
</g>

<!-- Row 4 -->
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.35s, .95s; cursor:pointer;">
  <circle data-id="w26" cx="65"  cy="270" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.55s, 1.15s; cursor:pointer;">
  <circle data-id="w27" cx="125" cy="297" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:.85s, 1.45s; cursor:pointer;">
  <circle data-id="w28" cx="175" cy="300" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.15s, 1.75s; cursor:pointer;">
  <circle data-id="w29" cx="225" cy="293" r="24" />
</g>
<g class="ballWrap" style="animation: bob 3s ease-in-out infinite, sway 5s ease-in-out infinite; animation-delay:1.45s, 2.05s; cursor:pointer;">
  <circle data-id="w30" cx="295" cy="273" r="24" />
</g>

  <!-- Icons injected here -->
  <g id="iconsLayer"></g>
</g>


            </svg>
          </div>

          <div class="mt-6">
            <div class="inline-flex items-center gap-2 bg-white/20 backdrop-blur px-5 py-3 rounded-full text-sm">
              <span class="hidden sm:inline">Click a ball to open a wish</span>
              <span class="sm:hidden">Tap a ball to open a wish</span>
              <span class="opacity-90">→</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- WISH MODAL -->
    <div id="modalBackdrop" class="fixed inset-0 z-40 bg-black/50 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity"></div>
    <div id="wishModal" class="fixed z-50 inset-0 flex items-center justify-center p-6 modal-hidden">
      <div class="w-full max-w-lg bg-white text-slate-800 rounded-2xl shadow-2xl overflow-hidden">
        <div class="relative bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 h-28">
          <button id="closeModalTop" aria-label="Close" class="absolute top-3 right-3 rounded-full bg-white/20 hover:bg-white/30 text-white p-2 transition">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M6 6l12 12M18 6L6 18" stroke="white" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
<div id="wishStudentImageContainer"
     class="absolute -bottom-10 left-1/2 -translate-x-1/2 h-20 w-20 rounded-full ring-4 ring-white overflow-hidden bg-white flex items-center justify-center">
  
  <!-- Actual student image (hidden by default) -->
  <img id="wishStudentImage"
       src=""
       alt="Student Image"
       class="h-20 w-20 object-cover rounded-full hidden" />

  <!-- Default placeholder avatar -->
  <svg id="wishStudentPlaceholder" viewBox="0 0 64 64" class="h-16 w-16">
    <circle cx="32" cy="32" r="30" fill="#EEF2FF"/>
    <circle cx="32" cy="26" r="10" fill="#A78BFA"/>
    <path d="M16 50c4-8 12-12 16-12s12 4 16 12" fill="#C4B5FD"/>
  </svg>
</div>

        </div>
        <div class="px-6 pt-12 pb-6">
          <div class="text-center">
            <h2 id="wishNickname" class="text-2xl font-bold text-slate-900">Student</h2>
            <p class="text-slate-600 mt-1">Anonymous profile</p>
          </div>
          <div class="mt-5 space-y-3">
            <div>
              <div class="text-slate-500 text-sm">Emotion</div>
              <p id="wishEmotion" class="text-slate-800"></p>
            </div>
            <div>
              <div class="text-slate-500 text-sm">Situation</div>
              <p id="wishSituation" class="text-slate-800"></p>
            </div>
            <div>
              <div class="text-slate-500 text-sm">Wish</div>
              <p id="wishText" class="text-slate-800"></p>
            </div>
          </div>
          <div class="mt-6 flex flex-col sm:flex-row gap-3">
            <button id="grantBtn" class="flex-1 inline-flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-indigo-600 text-white font-semibold hover:bg-indigo-500 transition">
              Grant this wish
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M13 5l7 7-7 7M5 12h14" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <button id="closeModal" class="px-4 py-3 rounded-xl bg-slate-900 text-white font-semibold hover:bg-slate-800 transition w-full sm:w-auto">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- DONATE / PLEDGE FORM -->
    <section id="page-donate" class="page">
      <div class="max-w-3xl mx-auto px-6 py-10">
        <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
          <div class="flex items-center justify-between">
            <h2 class="text-3xl font-bold">Pledge Support</h2>
            <span id="donateWishBadge" class="text-xs bg-white/20 px-3 py-1 rounded-full"></span>
          </div>
          <p class="mt-2 text-white/90">This pledge form is a sample and saves safely in your browser.</p>

          <form id="donorForm" class="mt-6 space-y-5">
            <input type="hidden" name="wish_id" id="donateWishId">
            <div class="rounded-xl bg-white/10 border border-white/10 p-4">
              <div class="text-sm opacity-80 mb-2">Choose how your name appears</div>
              <div class="grid md:grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm mb-2">Full Name (optional)</label>
                  <input name="name" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900 placeholder-slate-400" placeholder="Your full name" />
                </div>
                <div>
                  <label class="block text-sm mb-2">Nickname (optional)</label>
                  <input name="nickname" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900 placeholder-slate-400" placeholder="Shown to student if you prefer" />
                </div>
              </div>
              <div class="text-xs opacity-80 mt-2">Fill either one. If both are filled, we show the Full Name.</div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm mb-2">Email</label>
                <input required type="email" name="email" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900 placeholder-slate-400" placeholder="you@example.com" />
              </div>
              <div>
                <label class="block text-sm mb-2">Phone (optional)</label>
                <input name="phone" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900 placeholder-slate-400" placeholder="+60 ..." />
              </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm mb-2">Contribution Type</label>
                <select name="type" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900">
                  <option>Cash</option>
                  <option>Item purchase</option>
                  <option>Second-hand item</option>
                  <option>Volunteer help</option>
                </select>
              </div>
              <div>
                <label class="block text-sm mb-2">Estimated Amount/Value (optional)</label>
                <input name="amount" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900 placeholder-slate-400" placeholder="e.g., RM120" />
              </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm mb-2">Preferred Timeline</label>
                <select name="timeline" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900">
                  <option>As soon as possible</option>
                  <option>Within 1 week</option>
                  <option>Within 1 month</option>
                </select>
              </div>
              <div>
                <label class="block text-sm mb-2">Message to Admin (optional)</label>
                <input name="message" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900 placeholder-slate-400" placeholder="Any details or questions" />
              </div>
            </div>

            <div class="flex items-center gap-3">
              <button class="px-5 py-3 rounded-xl bg-white text-indigo-700 font-semibold hover:bg-white/90">Submit Pledge</button>
              <button type="button" id="cancelDonate" class="px-5 py-3 rounded-xl bg-white/10 border border-white/20 hover:bg-white/20">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- ABOUT (with stats + SKP details) -->
      <section id="page-about" class="page">
        <div class="max-w-6xl mx-auto px-6 py-10">
          <h2 class="text-3xl md:text-4xl font-bold">About This Project</h2>
          <p class="mt-4 text-white/90 text-lg leading-relaxed max-w-3xl">
            A simple way to support students in need. Each anonymous wish is reviewed by school staff and listed here for donors to grant.
          </p>

          <div class="mt-8 grid lg:grid-cols-2 gap-6">
            <!-- School Snapshot -->
            <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
              <h3 class="text-xl font-semibold">School Snapshot</h3>
              <div class="mt-4 space-y-4">
                <div>
                  <div class="flex items-center justify-between text-sm"><span>B40 Students</span><span id="statB40Pct">62%</span></div>
                  <div class="mt-2 h-3 rounded-full bg-white/10 overflow-hidden">
                    <div id="barB40" class="h-3 bg-yellow-300 rounded-full" style="width:62%"></div>
                  </div>
                </div>
                <div>
                  <div class="flex items-center justify-between text-sm"><span>Avg. Grant Time</span><span>3–7 days</span></div>
                  <div class="mt-2 h-3 rounded-full bg-white/10 overflow-hidden">
                    <div class="h-3 bg-green-300 rounded-full" style="width:45%"></div>
                  </div>
                </div>
                <div>
                  <div class="flex items-center justify-between text-sm"><span>Essentials Coverage (est.)</span><span>76%</span></div>
                  <div class="mt-2 h-3 rounded-full bg-white/10 overflow-hidden">
                    <div class="h-3 bg-indigo-300 rounded-full" style="width:76%"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Impact This Month -->
            <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
              <h3 class="text-xl font-semibold">Impact This Month</h3>
              <div class="grid grid-cols-3 gap-4 mt-4 text-center">
                <div class="rounded-xl bg-white/10 p-4">
                  <div id="statWishes" class="text-3xl font-bold">0</div>
                  <div class="text-sm opacity-80">Wishes</div>
                </div>
                <div class="rounded-xl bg-white/10 p-4">
                  <div id="statGranted" class="text-3xl font-bold">0</div>
                  <div class="text-sm opacity-80">Granted</div>
                </div>
                <div class="rounded-xl bg-white/10 p-4">
                  <div id="statDonors" class="text-3xl font-bold">0</div>
                  <div class="text-sm opacity-80">Donors</div>
                </div>
              </div>

              <div class="mt-6 rounded-xl bg-white/10 p-4">
                <div class="font-semibold">Contact MRSM Kuching</div>
                <div class="mt-2 space-y-1 text-white/90">
                  <div>📞 +60 82-123 456</div>
                  <div>✉️ support.mrsmkuching@example.edu.my</div>
                </div>
              </div>

              <div class="mt-6 rounded-xl bg-white/10 p-4">
                <div class="font-semibold">How SKP (Student Bodies) supports this</div>
                <ul class="mt-2 list-disc list-inside text-white/90 space-y-1">
                  <li>Collect and verify wishes with counselors and class teachers</li>
                  <li>Coordinate logistics and handovers with donors</li>
                  <li>Rotate monthly wish lists and track completions</li>
                  <li>Safeguard student privacy and dignity throughout</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ACHIEVEMENTS -->
      <section id="page-achievements" class="page">
        <div class="max-w-6xl mx-auto px-6 py-10">
          <h2 class="text-3xl md:text-4xl font-bold">Achievements</h2>
          <p class="mt-3 text-white/90">Top contributors by pledges and estimated value (demo).</p>
          <div class="mt-6 grid lg:grid-cols-2 gap-6">
            <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
              <h3 class="text-xl font-semibold mb-4">Most Pledges</h3>
              <div id="topPledges" class="space-y-3"></div>
            </div>
            <div class="rounded-2xl bg-white/10 border border-white/10 p-6">
              <h3 class="text-xl font-semibold mb-4">Highest Estimated Value</h3>
              <div id="topValue" class="space-y-3"></div>
            </div>
          </div>
        </div>
      </section>

    <!-- STATUS -->
    <section id="page-status" class="page">
      <div class="max-w-4xl mx-auto px-6 py-10">
        <h2 class="text-3xl md:text-4xl font-bold">Donor Status</h2>
        <p class="mt-3 text-white/90">Enter your donation code to see progress (demo data).</p>
        <div class="mt-6 grid md:grid-cols-3 gap-4 items-end">
          <div class="md:col-span-2">
            <label class="block text-sm mb-2">Donation Code</label>
            <input id="lookupCode" class="w-full px-4 py-3 rounded-xl bg-white text-slate-900 placeholder-slate-400" placeholder="e.g., WISH-1234" />
          </div>
          <button id="lookupBtn" class="px-4 py-3 rounded-xl bg-white text-indigo-700 font-semibold hover:bg-white/90">Check</button>
        </div>
        <div id="statusResult" class="mt-8 rounded-2xl bg-white/10 border border-white/10 p-6 hidden"></div>
      </div>
    </section>

    <!-- INBOX -->
<section id="page-inbox" class="page">
  <div class="max-w-6xl mx-auto px-6 py-8">
    <div class="flex items-center justify-between">
      <h2 class="text-3xl font-bold">Inbox</h2>
      <div id="inboxUserBadge" class="text-sm bg-white/20 px-3 py-1 rounded-full">-</div>
    </div>

    <!-- Banner for status/errors -->
    <div id="inboxBanner" class="hidden mt-4 text-sm px-4 py-2 rounded-lg bg-yellow-500/20 text-yellow-200"></div>

    <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- Conversations list -->
      <div class="lg:col-span-1 rounded-2xl bg-white/10 border border-white/10 overflow-hidden">
        <div class="px-4 py-3 border-b border-white/10 font-semibold">Conversations</div>
        <div id="threadList" class="max-h-[60vh] overflow-y-auto divide-y divide-white/10"></div>
      </div>

      <!-- Chat window -->
      <div class="lg:col-span-2 rounded-2xl bg-white/10 border border-white/10 flex flex-col min-h-[50vh]">
        <div id="chatHeader" class="px-5 py-3 border-b border-white/10 flex items-center justify-between">
          <div class="font-semibold">Select a conversation</div>
          <div id="chatMeta" class="text-xs opacity-80"></div>
        </div>
        <div id="chatMessages" class="flex-1 overflow-y-auto p-5 space-y-3"></div>
        <div class="p-4 border-t border-white/10">
          <form id="chatForm" class="flex items-center gap-3">
            <input id="chatInput" class="flex-1 px-4 py-3 rounded-xl bg-white text-slate-900 placeholder-slate-400" placeholder="Type a message..." />
            <button id="chatSendBtn" type="submit" class="px-4 py-3 rounded-xl bg-white text-indigo-700 font-semibold hover:bg-white/90">Send</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>


  <footer class="max-w-6xl mx-auto px-6 pb-10 pt-6 text-sm text-white/80">
    Demo: Admin actions are done in admin panel. Inbox and Profile are saved locally for this demo.
  </footer>

  <!-- PROFILE MODAL -->
  <div id="profileModal" class="fixed inset-0 z-[70] hidden">
    <div class="absolute inset-0 bg-black/50"></div>
    <div class="absolute inset-0 flex items-center justify-center p-6">
      <div class="w-full max-w-md rounded-2xl bg-white text-slate-800 shadow-2xl overflow-hidden">
        <div class="flex items-center justify-between px-5 py-3 bg-slate-100">
          <div class="font-semibold">Your Profile</div>
          <button id="closeProfile" class="px-2 py-1 rounded-lg bg-slate-200 hover:bg-slate-300">Close</button>
        </div>
        <div class="p-5 space-y-4">
          <div class="flex items-center gap-3">
            <div class="h-11 w-11 rounded-full bg-indigo-600 text-white flex items-center justify-center font-semibold" id="profAvatar">U</div>
            <div>
              <div id="profUsername" class="font-semibold">-</div>
              <div id="profRole" class="text-xs text-slate-500">-</div>
            </div>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="rounded-xl bg-slate-50 p-4">
              <div class="text-xs text-slate-500">Pledges Made</div>
              <div id="profPledges" class="text-2xl font-bold">0</div>
            </div>
            <div class="rounded-xl bg-slate-50 p-4">
              <div class="text-xs text-slate-500">Wishes Granted</div>
              <div id="profGranted" class="text-2xl font-bold">0</div>
            </div>
            <div class="rounded-xl bg-slate-50 p-4 col-span-2">
              <div class="text-xs text-slate-500">Total Donated (est.)</div>
              <div id="profDonated" class="text-2xl font-bold">RM0.00</div>
            </div>
          </div>
          <div class="rounded-xl bg-slate-50 p-4">
            <div class="text-xs text-slate-500">Recent pledge</div>
            <div id="profRecent" class="text-sm mt-1">-</div>
          </div>
          <div class="text-xs text-slate-500">
            Note: This is demo data stored in your browser.
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="js/donor.js"></script>
</body>
</html>
